\tikzstyle{block-w} = 
	[rectangle, draw, fill=white, text centered, 
	rounded corners, text width=6.0em, node distance=2cm]
\tikzstyle{block-y} = 
	[rectangle, draw, fill=yellow!75, text centered, 
	rounded corners, text width=6.0em, node distance=2cm]
\tikzstyle{block-g} = 
	[rectangle, draw, fill=green!50, text centered, 
	rounded corners, text width=6.0em, node distance=2cm]
\tikzstyle{block-r} = 
	[rectangle, draw, fill=red!50, text centered, 
	rounded corners, text width=4.5em, node distance=2cm]
\tikzstyle{if} = 
	[diamond, draw, fill=orange!50, text centered, 
	rounded corners, text width=2.5em, node distance=2cm, minimum height=2.5em]
\tikzstyle{circle} = 
	[ellipse, draw, fill=blue!25, text centered, 
	node distance=2cm, minimum height=3em]  
\tikzstyle{line} = [draw, -latex']

\begin{tikzpicture}[node distance = 1.8cm, auto]
	\node [block-w] (client) {client};
	\node [block-w, below of=client] (app) {App};
	\node [circle, below of=app] (qr) {QR Code};
	\node [block-w, below of=qr] (sell) {Seller};
	\node [block-w, left=1em of sell] (inv) {Inventor};
	\node [block-w, right=1em of sell] (cert) {Certificator};
	\node [block-y, below of=sell] (gpg1) {$ GPG_{1} $};
	\node [block-y, below of=inv] (gpg2) {$ GPG_{2} $};
	\node [block-y, below of=cert] (gpg3) {$ GPG_{3} $};
	\node [block-y, below of=gpg1] (dir1) {Address and fee percentage};
	\node [block-y, below of=gpg2] (dir2) {Address and fee percentage};
	\node [block-y, below of=gpg3] (dir3) {Address and fee percentage};
	\node [circle, below of=dir1] (val) {Validation};
	\node [if, below of=val] (if) {If};
	\node [block-r, below left of=if] (not-ok) {Invalid};
	\node [block-r, left=4em of not-ok] (error) {Error};
	\node [block-g, below right of=if] (ok) {Valid};
	\node [circle, below of=ok] (pay) {Payment};
	\path [line] (client) -- (app);
	\path [line] (app) -- (qr);
	\path [line] (qr) -- (sell);
	\path [line] (qr) -| (inv.north);
	\path [line] (qr) -| (cert.north);
	\path [line] (sell) -- (gpg1);
	\path [line] (inv) -- (gpg2);
	\path [line] (cert) -- (gpg3);
	\path [line] (gpg1) -- (dir1);
	\path [line] (gpg2) -- (dir2);
	\path [line] (gpg3) -- (dir3);
	\path [line] (dir1) -- (val);
	\path [line] (dir2) |- (val);
	\path [line] (dir3) |- (val);
	\path [line] (val) -- (if);
	\path [line] (if) -- (ok);
	\path [line] (if) -- (not-ok);
	\path [line] (not-ok) -- (error);
	\path [line, dashed] (error) |- (app.west);
	\path [line] (ok) -- (pay);
	
\end{tikzpicture}
	
	
	
	
	
